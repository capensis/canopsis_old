# Notes de version Canopsis 24.04.6

Canopsis 24.04.6 a été publié le 3 février 2025.

## Procédure d'installation

Suivre la [procédure d'installation de Canopsis](../guide-administration/installation/index.md).

## Procédure de mise à jour

Suivre la [procédure standard de mise à jour de Canopsis](../guide-administration/mise-a-jour/index.md).

### Changements importants

!!! warning "Politique de rétention TimescaleDB"

    Dans les "paramètres de stockage", accessibles depuis le menu "Administration", toutes les politiques utilisant l'unité "mois" sont erronées et interprétées en unité "minute". Il est donc impératif de vernir refaire vos configurations et de les sauvegarder à nouveau après installation de cette version.


### Corrections de bugs

*  **Général :**
    * Correction d'un bug de politique de rétention coté timescaledb. L'unité "Month" était interprétée comme "Minute" (#5762)

*  **Interface graphique :**
    * Dans l'éditeur de filtre, le champ prédéfini "2 derniers jours" correspond à présent réellement à 2 jours (#5770)
    * **Météo des Services :**
        * Correction d'un bug qui entrainait une erreur de calcul de compteur de pbh dans les tuiles de météo de services (#5758)
    * **Bac à alarmes :**
        * Correction d'un bug qui faisait apparaitre un popup d'erreur lors de l'exécution d'une remédiation manuelle (#5741)
        * Correction d'un bug qui empêchait dexécuter des actions de type "Fast cancel" avec le message de log suivant `"remaining time -1.637541ms until context deadline is less than or equal to 90th percentile RTT: operation not sent to server, as Timeout would be exceeded: context deadline exceeded"` (#5753)
        * Correction d'un bug qui empêchait les modèles de widgets de méta alarmes de s'appliquer correctement dans certaines situations (#5748)
        * Correction d'un bug qui empêchait les badges de tags d'être en couleur (#5775)

*  **Moteurs :**
    * **Action :**
        * Correction d'un bug qui entrainait un crash du moteur "action" avec l'erreur `"fatal error: concurrent map writes"` (#5702)

*  **API :**
    * Correction d'un bug qui entrainait l'erreur `"runtime error: invalid memory address or nil pointer dereference" worker="worker healthcheck"` dans l'API (#5740)


### Améliorations

*  **Général :**
    * La fonctionnalité "sli_duration" peut être désactivée depuis l'interface graphique (#5717)
    * Redirection du navigateur sur la page de login après le timeout de session (#5746)
    * Comme pour une règle de déclaration de ticket, il est désormais possible de déclarer un nom de système dans un scénario (#5620)
    * Amélioration des scripts de migration de patterns (#5656)
    * Optimisation d'un requête mongoDB permettant d'accélérer le traitement des comportements périodiques (#5765)

*  **Editeur de patterns :**
    * Ajout des champs suivants dans l'éditeur de patterns : Auteur/initiateur de snooze, initiateur de state (#5768)

*  **API :**
    * Lorsqu'un IdP est injoignable, le service d'API peut à présent fonctionner normalement (#5725)
